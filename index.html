<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Panelto Bakery</title>
<style>
  :root{
    --bg:#f7fafc; --ink:#1e293b; --muted:#64748b; --card:#ffffff; --brand:#2563eb;
    --ring:#93c5fd; --row:#f8fafc; --row-alt:#f1f5f9; --accent:#e2e8f0;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);color:var(--ink)}
  header{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid #e2e8f0;backdrop-filter:saturate(120%) blur(4px)}
  .hwrap{max-width:1100px;margin:0 auto;padding:12px 14px;display:flex;align-items:center;gap:10px}
  .title{font-weight:800}
  main{max-width:1100px;margin:0 auto;padding:12px}
  .stack{display:flex;flex-direction:column;gap:10px}
  .tile{display:block;background:linear-gradient(135deg,#fff,#f8fafc);border:1px solid #e2e8f0;border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,.08);padding:18px 16px;text-decoration:none;color:inherit}
  .tile h2{margin:0 0 4px 0;font-size:1.1rem}
  .tile p{margin:0;color:var(--muted);font-size:.9rem}
  .tile:active{transform:translateY(1px)}
  .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
  .square{aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center}
  .c1{background:#fef3c7}.c2{background:#dbeafe}.c3{background:#d1fae5}.c4{background:#f3e8ff}
  .card{background:var(--card);border:1px solid #e2e8f0;border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,.08);padding:12px}
  .crumbs{display:flex;gap:6px;flex-wrap:wrap;margin:8px 0 12px}
  .crumbs a{color:var(--brand);text-decoration:none}
  .crumbs .sep{opacity:.45;color:var(--muted)}
  .toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:10px 0}
  input[type="search"],select{padding:8px 10px;border-radius:10px;border:1px solid #cbd5e1;background:#fff;color:var(--ink)}
  .btn{background:var(--brand);border:none;color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
  .btn.ghost{background:transparent;color:var(--ink);border:1px solid #cbd5e1}
  .btn.badge{font-size:.78rem;padding:4px 8px;border-radius:999px}
  .small{font-size:.86rem;color:var(--muted)}
  .list{display:flex;flex-direction:column;gap:8px}
  .item{display:flex;align-items:center;gap:12px;border:1px solid #e2e8f0;border-radius:12px;padding:12px;background:#fff}
  .item a.title{flex:1;text-decoration:none;color:inherit}
  .item a.title:hover{text-decoration:underline}
  .item .meta{font-size:.82rem;color:var(--muted);margin-top:4px}
  .icon-btn{min-width:34px;min-height:34px;border-radius:999px;border:1px solid #cbd5e1;background:#2563eb;color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer}
  .icon-btn svg{width:16px;height:16px;display:block}
  footer{height:1px}

  /* Data table styles */
  .table-wrap{overflow:auto;border:1px solid var(--accent);border-radius:12px;background:#fff}
  table.data{width:100%;border-collapse:separate;border-spacing:0;font-size:0.95rem}
  table.data thead th{position:sticky;top:0;background:#f8fafc;border-bottom:1px solid var(--accent);padding:10px;text-align:left;z-index:1;white-space:nowrap}
  table.data tbody td{padding:10px;border-bottom:1px solid #eef2f7;vertical-align:top}
  table.data tbody tr:nth-child(even){background:var(--row)}
  table.data tbody tr:hover{outline:2px solid var(--ring);outline-offset:-2px}
  .th-sortable{cursor:pointer}
  .th-sortable .dir{opacity:.6;margin-left:6px}
  .col-narrow{width:120px}
  .col-date{width:160px}
  .col-desc{min-width:340px}
  .col-action{min-width:300px}

  /* Preview modal */
  #previewBackdrop{position:fixed;inset:0;background:rgba(15,23,42,.55);display:none;z-index:9998}
  #previewCard{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);width:min(100vw,1000px);height:min(100vh,88vh);background:#ffffff;border:1px solid #e2e8f0;border-radius:14px;box-shadow:0 20px 60px rgba(0,0,0,.25);overflow:hidden}
  #previewHead{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e2e8f0;background:#f8fafc;padding:8px 12px}
  #previewBody{width:100%;height:calc(100% - 46px);background:#fff;display:flex;align-items:stretch;justify-content:stretch;overflow:hidden}
</style>
</head>
<body>
  <header>
    <div class="hwrap">
      <div class="title">Panelto Bakery</div>
      <form id="globalSearchForm" style="margin-left:auto;display:flex;gap:8px;align-items:center">
        <input id="globalSearchInput" type="search" placeholder="Search all files…" aria-label="Search" style="padding:8px 10px;border-radius:10px;border:1px solid #cbd5e1;background:#fff;color:#1e293b;min-width:210px">
        <button class="btn" type="submit">Search</button>
        <button class="btn ghost" id="clearSearchBtn" type="button" style="display:none">Clear</button>
      </form>
    </div>
  </header>

  <!-- PIN lock -->
  <div id="lockscreen" style="position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#f7fafc;z-index:9999;">
    <h2 style="margin-bottom:12px;font-family:Inter,sans-serif;color:#1e293b;">Enter Access Code</h2>
    <input type="password" id="pinInput" placeholder="Code" style="padding:10px 14px;border:1px solid #cbd5e1;background:#fff;color:#1e293b;border-radius:8px;font-size:1rem;">
    <button id="pinBtn" style="margin-top:12px;padding:10px 16px;border:none;border-radius:8px;background:#2563eb;color:#fff;font-size:1rem;cursor:pointer;">Unlock</button>
    <p id="pinMsg" style="color:#dc2626;margin-top:10px;display:none;">Wrong code</p>
  </div>

  <!-- PREVIEW MODAL -->
  <div id="previewBackdrop">
    <div id="previewCard">
      <div id="previewHead">
        <div id="previewTitle" style="font-weight:600;color:#1e293b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">Preview</div>
        <div style="display:flex;gap:8px;align-items:center">
          <a id="previewDownload" class="btn" style="text-decoration:none;padding:6px 10px;border-radius:10px;background:#2563eb;color:#fff">Download</a>
          <button id="previewClose" class="btn ghost" style="padding:6px 10px;border-radius:10px;border:1px solid #cbd5e1;background:#fff;color:#1e293b">Close</button>
        </div>
      </div>
      <div id="previewBody"></div>
    </div>
  </div>

  <main>
    <nav class="crumbs" id="crumbs"></nav>
    <section id="view">
      <div class="stack">
        <a class="tile" href="?bakery=Bakery%201"><h2>Bakery 1</h2><p>Open</p></a>
        <a class="tile" href="?bakery=Bakery%202"><h2>Bakery 2</h2><p>Open</p></a>
        <a class="tile" href="?bakery=Bakery%203"><h2>Bakery 3</h2><p>Open</p></a>
      </div>
    </section>
  </main>
  <footer></footer>

  <!-- Google Identity Services + Google API client -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js" async defer></script>

  <script>
  /* ========= CIJELI JAVASCRIPT DOLAZI OVDJE ========= */
  /* ... (ovdje ide isti kompletan JS koji sam ti već slao, uključuje:
       - CLIENT_ID, API_KEY, SCOPES
       - MACHINES, FOLDERS, CATS
       - fetchSheetTable (GViz + CSV fallback)
       - renderWorksTable sa sortiranjem po "Completed On"
       - openInlinePreview (image, pdf, video support)
       - Google Drive public/admin listing
       - Upload
       - Global Search
       - PIN Gate
       - Auto-refresh helper) ...
  */
  </script>
</body>
</html>


